<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Checkout | SakwoodEnterprise</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

<style>
/* ================= BODY ================= */
body {
  margin: 0;
  font-family: Segoe UI, sans-serif;
  background: url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c') center/cover no-repeat fixed;
  background-size: cover;
  color: white;
  min-height: 100vh;
}

/* ================= NAVBAR ================= */
.navbar {
  background: rgba(0,0,0,0.45);
  backdrop-filter: blur(12px);
  border-radius: 40px;
  margin: 10px 20px;
  padding: 6px 18px;
  box-shadow: 0 4px 14px rgba(0,0,0,.25);
}
.navbar .nav-link {
  color: #fff !important;
  font-weight: 600;
}
.navbar .nav-link:hover,
.navbar .nav-link.active {
  color: #ffc107 !important;
}
/* White hamburger icon */
.navbar-toggler-icon {
  background-image: url("data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='rgba%28255,255,255,1%29' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E");
}

.nav-link.position-relative{
  position:relative;
}
#cart-count{
  position:absolute;
  top:-10px;
  right:-5px;
  font-size:0.7rem;
  padding:2px 6px;
}

/* ================= CHECKOUT CARD ================= */
.checkout-box {
  background: rgba(0,0,0,0.65);
  backdrop-filter: blur(10px);
  border-radius: 18px;
  padding: 30px;
  box-shadow: 0 10px 30px rgba(0,0,0,.4);
}

/* ================= ORDER SUMMARY ================= */
#order-summary .item {
  display: flex;
  justify-content: space-between;
  padding: 6px 0;
  border-bottom: 1px solid rgba(255,255,255,0.2);
}
#order-summary .item:last-child { border-bottom: none; }

/* ================= MODERN FOOTER ================= */
footer {
  background: rgba(15,15,15,0.95);
  backdrop-filter: blur(10px);
  padding-top: 60px;
}
.footer-title {
  color: #fff;
  font-weight: 700;
  margin-bottom: 20px;
}
.footer-text {
  color: #aaa;
  font-size: 0.95rem;
}
.footer-links a {
  display: block;
  color: #aaa;
  margin-bottom: 8px;
  text-decoration: none;
  transition: 0.3s;
}
.footer-links a:hover {
  color: #ffc107;
  transform: translateX(5px);
}
.social-icons a {
  display: inline-flex;
  justify-content: center;
  align-items: center;
  width: 42px;
  height: 42px;
  border-radius: 50%;
  background: #1f1f1f;
  color: #fff;
  margin-right: 10px;
  transition: 0.3s ease;
  font-size: 1.2rem;
}
.social-icons a:hover {
  background: #ffc107;
  color: #000;
  transform: translateY(-5px);
}
.footer-divider {
  height: 1px;
  background: #222;
  margin: 40px 0 20px;
}
.footer-bottom {
  text-align: center;
  color: #777;
  padding-bottom: 20px;
  font-size: 0.9rem;
}

/* ================= MEDIA ================= */
@media(max-width:768px){
  .checkout-box { padding: 20px; }
  .navbar-brand img { height: 55px; }
  footer{text-align:center;}
}
</style>
</head>

<body>
<!-- ================= NAVBAR ================= -->
<nav class="navbar navbar-expand-lg fixed-top">
<div class="container-fluid">
  <a class="navbar-brand d-flex align-items-center" href="index.html">
    <img src="sakwoodLOGO.png" alt="WoodCraft Logo" style="height:65px;">
    <span class="ms-2">SakwoodEnterprise</span>
  </a>
  <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarNav">
    
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav ms-auto align-items-lg-center text-center">
      <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
      <li class="nav-item"><a class="nav-link" href="products.html">Products</a></li>
      <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
      <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
      <li class="nav-item"><a class="nav-link" href="faq.html">FAQ</a></li>
      <li class="nav-item ms-lg-3 mt-2 mt-lg-0">
        <a class="nav-link position-relative" href="cart.html">
          üõí <span id="cart-count" class="badge bg-danger">0</span>
        </a>
      </li>
    </ul>
  </div>
</div>
</nav>

<!-- ================= CHECKOUT ================= -->
<div class="container" style="margin-top:130px; margin-bottom:80px;">
  <div class="row justify-content-center">
    <div class="col-md-8 checkout-box">
      <h3 class="mb-4 text-warning">Checkout ‚Äì Payment on Delivery</h3>

      <form id="checkoutForm">
        <div class="row">
          <div class="col-md-6 mb-3">
            <label>Full Name *</label>
            <input type="text" class="form-control" name="name" required>
          </div>
          <div class="col-md-6 mb-3">
            <label>Phone Number *</label>
            <input type="tel" class="form-control" name="phone" required>
          </div>
        </div>

        <div class="mb-3">
          <label>Email (optional)</label>
          <input type="email" class="form-control" name="email">
        </div>

        <div class="mb-3">
          <label>Delivery Address *</label>
          <textarea class="form-control" rows="3" name="address" required></textarea>
        </div>

        <hr class="text-light">

        <h5 class="text-warning">Order Summary</h5>
        <div id="order-summary" class="mb-3"></div>

        <h6 class="mb-4">Payment Method: <strong>Payment on Delivery</strong></h6>

        <button type="submit" class="btn btn-warning w-100 btn-lg" id="placeOrderBtn">
          Place Order
        </button>
      </form>
    </div>
  </div>
</div>

<!-- ================= MODERN FOOTER ================= -->
<footer>
<div class="container">
<div class="row">

<div class="col-md-3 mb-4">
<h5 class="footer-title">SakwoodEnterprise</h5>
<p class="footer-text">
Premium wooden doors crafted for durability, security and beauty.
</p>
<div class="social-icons mt-3">
<a href="https://www.instagram.com/sakwoodenterprise/" target="_blank"><i class="fab fa-instagram"></i></a>
<a href="https://www.tiktok.com/@sakwood.enterpris" target="_blank"><i class="fab fa-tiktok"></i></a>
</div>
</div>

<div class="col-md-3 mb-4">
<h5 class="footer-title">Quick Links</h5>
<div class="footer-links">
<a href="index.html">Home</a>
<a href="products.html">Products</a>
<a href="about.html">About</a>
<a href="contact.html">Contact</a>
<a href="faq.html">FAQ</a>
</div>
</div>

<div class="col-md-3 mb-4">
<h5 class="footer-title">Contact</h5>
<p class="footer-text">üìç Sasabi Junction, Dodowa Road</p>
<p class="footer-text">üìû 0243860943 / 0552186664</p>
<p class="footer-text">üìß sakwoodenterprise@gmail.com</p>
</div>

<div class="col-md-3 mb-4">
<h5 class="footer-title">Business Hours</h5>
<p class="footer-text">Mon - Fri: 8AM - 6PM</p>
<p class="footer-text">Saturday: 9AM - 4PM</p>
<p class="footer-text">Sunday: Closed</p>
</div>

</div>
<div class="footer-divider"></div>
<div class="footer-bottom">
¬© 2026 SakwoodEnterprise. All Rights Reserved.
</div>
</div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

<script>
// ================= CART FUNCTIONS =================
const EMAILJS_PUBLIC_KEY = "tdG6auzNc-iNhPhRI";
const EMAILJS_SERVICE_ID = "service_0d34gyf";
const EMAILJS_TEMPLATE_ID = "template_rijwftw";
emailjs.init(EMAILJS_PUBLIC_KEY);

function getCart() {
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  return cart.map(i => ({ ...i, qty: i.qty && i.qty > 0 ? Number(i.qty) : 0 }));
}

function updateCartBadge() {
  const cart = getCart();
  const count = cart.reduce((sum, i) => sum + i.qty, 0);
  const badge = document.getElementById("cart-count");
  if(badge) badge.textContent = count;
  togglePlaceOrderButton(count);
}

function togglePlaceOrderButton(count) {
  const btn = document.querySelector("#checkoutForm button[type=submit]");
  if(btn) btn.disabled = count === 0;
}

function displayOrderSummary() {
  const cart = getCart();
  const summaryDiv = document.getElementById("order-summary");
  summaryDiv.innerHTML = "";
  const hasItems = cart.some(i => i.qty > 0);
  if(!hasItems) { summaryDiv.innerHTML = "<p class='text-muted'>Your cart is empty.</p>"; return; }

  let total = 0;
  cart.forEach(item => {
    if(item.qty>0){
      const div = document.createElement("div");
      div.className = "item";
      const itemTotal = item.price * item.qty;
      div.innerHTML = `<span>${item.name} x ${item.qty}</span> <strong>‚Çµ${itemTotal}</strong>`;
      summaryDiv.appendChild(div);
      total += itemTotal;
    }
  });
  const totalDiv = document.createElement("div");
  totalDiv.className = "item fw-bold mt-3 pt-2 border-top border-warning border-2";
  totalDiv.innerHTML = `<span>TOTAL</span> <strong>‚Çµ${total.toLocaleString()}</strong>`;
  summaryDiv.appendChild(totalDiv);
}

// ================= EMAILJS CHECKOUT =================
document.getElementById("checkoutForm").addEventListener("submit", function(e){
  e.preventDefault();
  const cart = getCart().filter(i=>i.qty>0);
  if(cart.length===0){ alert("Your cart is empty!"); return; }

  const formData = new FormData(this);
  const customer = {
    name: formData.get('name'),
    phone: formData.get('phone'),
    email: formData.get('email') || 'Not provided',
    address: formData.get('address')
  };

  const total = cart.reduce((sum,i)=>sum+(i.price*i.qty),0);
  const cart_items = cart.map(i=>`${i.name} x ${i.qty} (‚Çµ${i.price*i.qty})`).join('\n');

  const btn = document.getElementById('placeOrderBtn');
  const originalText = btn.innerHTML;
  btn.innerHTML = '‚è≥ Sending...';
  btn.disabled = true;

  emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, {
    name: customer.name,
    phone: customer.phone,
    email: customer.email,
    address: customer.address,
    cart_items: cart_items,
    total: `‚Çµ${total.toLocaleString()}`
  }).then(result => {
    alert("üéâ Order placed successfully! We'll contact you within 24 hours.");
    localStorage.removeItem("cart");
    updateCartBadge();
    displayOrderSummary();
    setTimeout(()=>window.location.href="index.html",1500);
  }).catch(err => {
    alert("‚ùå Failed to send order. Please try again or call: 0243860943");
    console.error(err);
  }).finally(()=>{ btn.innerHTML = originalText; btn.disabled=false; });

});

// ================= INITIALIZE =================
document.addEventListener("DOMContentLoaded", function(){
  updateCartBadge();
  displayOrderSummary();
});
</script>

</body>
</html>
